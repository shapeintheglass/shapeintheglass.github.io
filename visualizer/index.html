<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Dialogue Visualizer</title>

  <style>
    #textarea {
      font-family: Consolas, Monaco, Lucida Console, Liberation Mono, DejaVu Sans Mono, Bitstream Vera Sans Mono, Courier New, monospace;
    }

    td {
      padding: 5px;
    }
  </style>
  <script src="parser.js"></script>
</head>

<body>
  <h3>
    JSON
  </h3>
  <p>Copy/paste dialog file contents or drag & drop json file (only works with json files in TagDatabases\Dialogue):
  </p>
  <label>
    <span>
      <textarea onchange="textareaListener()" ondrop="dropHandler(event)" rows="8" cols="40" aria-label="Label"
        id="textarea" placeholder="Paste JSON text or drag & drop file here"></textarea>
    </span>
  </label>

  <p>After making changes, click "Export Changes" to update the textbox with the updated json.</p>
  <p>
    <button title="Update textbox with changes from table" onClick="populateTextArea()">
      <span>Export Changes</span>
    </button>
    <button title="Clear local storage" onClick="clearAll()">
      <span>Clear</span>
    </button>
  </p>


  <h3>Analytics and Testing</h3>

  <div>Subchunks: <span id="analytics-num-subchunks" style="font-weight: bold"></span>
    | Lines: <span id="analytics-num-lines" style="font-weight: bold"></span>
    | Tags: <span id="analytics-num-tags" style="font-weight: bold"></span>
    | Events: <span id="analytics-num-events" style="font-weight: bold"></span></div>

  <table style="width: 10%; border: 1px solid; border-style: groove;">
    <tr>
      <td style="vertical-align: top; ">
        <div>
          <p>Events:</p>
          <select id="analytics-all-events" onchange="onAnalyticsEventUpdated()"></select>
        </div>

        <div>
          <p>Tags related to selected event:</p>
          <div style="overflow: scroll-auto; max-height:300px; width:300px; overflow-x: hidden;">
            <ul id="analytics-all-tags"></ul>
          </div>
        </div>

        <div>
          <button onclick="onFireEvent()">Test Fire Event</button>
        </div>
      </td>
      <td style="width:10%">
        <div>
          <textarea readonly id="test-output" placeholder="Test conversation text" rows="20" cols="60"
            style="border: 1px solid; border-style: groove;"></textarea>
        </div>
        <div id="convo-options"></div>
      </td>
    </tr>
  </table>

  <hr class="solid">

  <h3>Filters</h3>

  <span id="filter-container">
    <select id="filter-column"></select>
    <select id="filter-operation">
      <option value="is">contains</option>
      <option value="is-not">does not contain</option>
    </select>
    <input id="filter-terms"></input>
    <button onclick="filterListener()">Apply</button>
    <button onclick="filterClear()">Clear</button>
  </span>

  <hr class="solid">

  <h3>
    Column Visibility Toggles
  </h3>
  <p>Toggle which columns are visible.</p>
  <div>
    <ul id="column-toggles" style="list-style-type: none;"></ul>
  </div>

  <hr class="solid">

  <h3>
    Data
  </h3>

  <p>Select subchunk to edit here.</p>
  <div>
    <select id="subchunkSelector" onchange="selectorListener()"></select>
  </div>

  <h4 id="jsonName"></h4>
  <p id="locInfo"></p>
  <div>
    <div>
      <table aria-label="Dialog table" style="border: 1px">
        <thead>
          <tr id="headerrow">
          </tr>
        </thead>
        <tbody id="datatablebody">
        </tbody>
      </table>
    </div>
  </div>
</body>
<html>